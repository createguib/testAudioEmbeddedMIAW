<!DOCTYPE html>
<html>
<head>
    <title>P√°gina de Prueba de Salesforce Chat</title>
</head>
<body>
    <h1>¬°Bienvenido a la p√°gina de prueba!</h1>
    <p>El widget y variables de chat de Salesforce deber√≠a aparecer en esta p√°gina.</p>

    <h2>Datos del Cliente Precargados:</h2>
    <p>‚úÖ Name: <strong id="mostrar_nombre">Cargando...</strong></p>
    <p>üìß Email: <strong id="mostrar_correo">Cargando...</strong></p>
    <p>üîë IATA: <strong id="mostrar_id">Cargando...</strong></p>
    <p>üåé POS: <strong id="mostrar_pais">Cargando...</strong></p>
    <p>üó£Ô∏è Language: <strong id="mostrar_idioma">Cargando...</strong></p>
    
    <script type='text/javascript'>
        var datosCliente = {
            nombre: "github",
            correo: "createguib@gmail.com",
            id: "12345678",
            pais: "CL",
            idioma: "es"
        };

        // ===============================================
        // 2. MOSTRAR DATOS EN LA P√ÅGINA (ETIQUETAS)
        // ===============================================
        
        document.getElementById('mostrar_nombre').textContent = datosCliente.nombre;
        document.getElementById('mostrar_correo').textContent = datosCliente.correo;
        document.getElementById('mostrar_id').textContent = datosCliente.id;
        document.getElementById('mostrar_pais').textContent = datosCliente.pais;
        document.getElementById('mostrar_idioma').textContent = datosCliente.idioma;
        
        // **TU C√ìDIGO DE SNIPPET DE CHAT DE SALESFORCE VA AQU√ç**
            function initEmbeddedMessaging() {
                try {
                    embeddedservice_bootstrap.settings.language = 'es'; // Idioma padr√£o do chat
        
                    // Espera o carregamento completo do componente para aplicar o CSS
                    window.addEventListener("onEmbeddedMessagingReady", () => {            
                        console.log("Inside Prechat API!!");
        
                        // Campos OCULTOS de prechat: se env√≠an al bot/flow, no los ve el usuario.
                        embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({           
                        "Language"      : "Espanol",                 // Ejemplo: literal
                        "Code_Language" : datosCliente.idioma || "es",
                        "POS"           : datosCliente.pais   || "CL",
                        "IATA"          : datosCliente.id     || "0",
                        "Email__c"      : datosCliente.correo || "",   // ejemplo de campo extra
                        "Name__c"       : datosCliente.nombre || ""    // ejemplo de campo extra
                    });
        
                    });
        
                    // Inicializa o Embedded Messaging
                    embeddedservice_bootstrap.init(
                        '00DVG0000066nAf',
                        'Chat_Latam_Airlines_EC',
                        'https://latamneworg--latamdev.sandbox.my.site.com/ESWChatLatamAirlinesEC1713540918754',
                        {
                            scrt2URL: 'https://latamneworg--latamdev.sandbox.my.salesforce-scrt.com'
                        }
                    );
        
                } catch (err) {
                    console.error('Error loading Embedded Messaging: ', err);
                }
            };
        </script>

        <script type='text/javascript' 
                src='https://latamneworg--latamdev.sandbox.my.site.com/ESWChatLatamAirlinesEC1713540918754/assets/js/bootstrap.min.js' 
                onload='initEmbeddedMessaging()'>
        </script>
        
    </script>
    </body>
</html>
